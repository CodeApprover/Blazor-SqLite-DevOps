---
name: "Development Success"

#  Confirms the success of the development workflow by publishing a success status for the related commit.

on:
  repository_dispatch:
    types: trigger-development-success

env:
  SHA: ${{ github.event.client_payload.sha }}
  SHA_BRANCH: ${{ github.event.client_payload.sha_branch }}
  CSPROJ: ${{ github.event.client_payload.csproj }}

jobs:
  succeed:
    name: Publish Development Success Status
    runs-on: ubuntu-latest
    timeout-minutes: 15
    #if: (github.actor != ${{ github.repository_owner }}) # prevents workflow

    steps:

    - name: Seek deployment
      uses: cloudposse/github-action-seek-deployment@0.1.0
      id: deployment
      with:
        github-token: ${{ secrets.AUTH }}
        environment: development
        ref: ${{ env.SHA }}
        status: success

    outputs:
      id: "${{ steps.deployment.outputs.id }}"
